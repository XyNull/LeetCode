import java.util.List;
import java.util.ArrayList;
import java.util.LinkedList;

public class Main {
	
	public List<List<Integer>> levelOrder(TreeNode root) {
		if(root == null) return new ArrayList<List<Integer>>();
	
		List<List<Integer>> res = new ArrayList<List<Integer>>();     
		LinkedList<TreeNode> queue = new LinkedList<TreeNode>();
		queue.add(root);
    
		int curLevel = 1;
		int nextLevel = 0;
    
		ArrayList<Integer> levelres = new ArrayList<Integer>();  
    
		while(!queue.isEmpty()){
			
			TreeNode cur = queue.poll();
			curLevel--;
			levelres.add(cur.val);
        
			if(cur.left != null){
				queue.add(cur.left);
				nextLevel++;  
			}
        
			if(cur.right != null){
				queue.add(cur.right);  
				nextLevel++;  
			}  
          
			if(curLevel == 0){  
				curLevel = nextLevel;  
				nextLevel = 0;  
				res.add(levelres);  
				levelres = new ArrayList<Integer>();  
			}
		}
    return res;  
	}
}
